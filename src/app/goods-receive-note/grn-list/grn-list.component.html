<div class="helper-panel clearfix">
  <i class="material-icons pull-left">info</i>
  <p class="info">
    Create digital goods received notes for products that you get from suppliers, update the payment status, upload your
    own necessary documents, and manage the trade process in one place.
  </p>
</div>
<div class="grn-container d-flex" *ngIf="grnList.length">
  <h1 translate class="main-title d-inline-flex align-self-center">Goods Received List</h1>
  <div class="grn-buttons">
    <div class="btn-holder">
      <button class="order-2 bttn-primary bttn-add" routerLink="/grn/generator">
        <span class="btn-desktop-txt">Create a GRN</span>
        <span class="btn-mobile-txt">New GRN</span>
      </button>
      <button class="order-1 btn-primary-transp">
        <i class="material-icons">arrow_upward</i>
        <span translate>Export</span>
      </button>
    </div>
  </div>
</div>
<div class="searchbar d-flex" *ngIf="grnList.length">
  <input [(ngModel)]="searchTerm" placeholder="Search goods received..." class="search-bar" type="search" />
  <span></span>
</div>
<table class="table main-table" *ngIf="grnList.length">
  <thead>
    <tr id="table-head">
      <th>ID</th>
      <th>Date</th>
      <th>Contact</th>
      <th>Product</th>
      <th>Quantity</th>
      <th>Price</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr
      *ngFor="
        let grn of grnList | filter: searchTerm | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage };
        let i = index
      "
    >
      <td># {{ grn?.numericId }}</td>
      <td>
        {{ grn.issueDate | date: 'dd/MM/yyyy' }}
      </td>
      <td>
        {{ grn?.supplier?.fullName }}
      </td>
      <td>
        {{ grn?.products | multiProduct }}
      </td>
      <td>
        {{ grn?.products | measurement: (grn?.products | productQuantity) }}
      </td>
      <td>{{ grn?.total | number: '1.2-2' }} {{ grn?.currency }}</td>
      <td>
        <span class="{{ grn?.paymentStatus | status }}">{{ grn?.paymentStatus | paymentStatus }}</span>
      </td>
      <td>
        <a [routerLink]="['/grn', grn?._id]" id="view">View</a>
      </td>
    </tr>
  </tbody>
</table>

<div class="strip mt-5" *ngIf="!grnList.length">
  <div class="create-grn-wrapper">
    <img class="mb-3 mt-3 helper-img" src="../../assets/img/dashboard-imgs/grn.png" />
    <p>Create <strong>digital goods received notes</strong> for products that you get from suppliers.</p>
    <button
      class="bttn-primary bttn-add"
      matTooltip="{{ tooltips.create_grn }}"
      matTooltipPosition="below"
      routerLink="/grn/generator"
    >
      <span class="btn-desktop-txt">Issue your first Goods Received Note</span>
      <span class="btn-mobile-txt">Issue your first GRN</span>
    </button>
  </div>
</div>

<div class="mobile-list-wrapper mb-5">
  <div
    class="strip mt-4 mb-3"
    *ngFor="
      let grn of grnList | filter: searchTerm | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage };
      let i = index
    "
  >
    <div class="flex-row">
      <div># {{ grn?.numericId }}</div>
      <div>{{ grn.issueDate | date: 'dd/MM/yyyy' }}</div>
    </div>
    <div class="flex-row">
      <div>{{ grn?.supplier?.fullName }}</div>
      <div class="{{ grn.paymentStatus | status }}">{{ grn.paymentStatus | paymentStatus }}</div>
    </div>
    <div>{{ grn?.products | multiProduct }}</div>
    <div>Quantity of {{ grn?.products | measurement: (grn?.products | productQuantity) }}</div>
    <div>Total of {{ grn?.total | number: '1.2-2' }} {{ grn?.currency }}</div>
    <div class="mt-3"><a [routerLink]="['/grn', grn?._id]" id="view">View</a></div>
  </div>
</div>
<pagination-controls *ngIf="grnList.length" (pageChange)="pageChanged($event)"></pagination-controls>
