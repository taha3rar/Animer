<div class="panel panel-tab products-col">
  <div class="panel-body">
    <div class="panel-header">
      <div>
        <p>{{ seller.first_name | titlecase }} {{ seller.last_name | titlecase }} Inventory</p>
      </div>
      <div [hidden]="inventoryProducts?.length < 1">
        <!-- <div class="search-box">
          <input
            type="text"
            [(ngModel)]="term"
            class="search-bar-rounded"
            type="text"
            placeholder="Search products..."
          />
          <i class="material-icons">search</i>
        </div> -->
        <button class="bttn-primary next-step" (click)="toOrderGenerator()">Next Step &rarr;</button>
      </div>
    </div>
    <div class="padding-all-2" *ngIf="inventoryProducts?.length >= 1">
      <div class="margin-bottom">
        <button class="btn-icons pull-right" (click)="onNextPage(agriculturalProducts.length, 4)">
          <i class="material-icons">keyboard_arrow_right</i>
        </button>
        <button class="btn-icons pull-right" (click)="onBackPage()">
          <i class="material-icons">keyboard_arrow_left</i>
        </button>
        <p class="normal-text-bold">Agricultural Products</p>
      </div>
      <div class="row clearfix">
        <div
          *ngFor="let product of (agriculturalProducts | paginate: { itemsPerPage: 4, currentPage: page })"
          class="col-md-3"
        >
          <div class="card card-agricultural">
            <div>
              <p class="pull-right margin-none">
                {{ product.price_per_unit }} {{ product.currency }}/<small>{{ product.weight_unit | uppercase }}</small>
              </p>
            </div>
            <div class="product-details">
              <div>
                <figure
                  class="img-circular img-circular-sm"
                  [ngStyle]="{ 'background-image': 'url(' + product_image(product) + ')' }"
                ></figure>
              </div>
              <p class="heading-2">
                {{ product.produce }} <br />
                {{ product.variety }}
              </p>
            </div>
            <div class="package-details">
              <table>
                <tr>
                  <td>Packages available</td>
                  <td>{{ product.quantityMax }}</td>
                </tr>
                <tr>
                  <td>Type of package</td>
                  <td>{{ product.type_of_package }}</td>
                </tr>
                <tr>
                  <td>Package</td>
                  <td>{{ product.package_weight }}/{{ product.weight_unit | uppercase }}</td>
                </tr>
                <tr>
                  <td>Total available</td>
                  <td>{{ product.package_weight * product.quantityMax }} {{ product.weight_unit | uppercase }}</td>
                </tr>
              </table>
            </div>

            <div *ngIf="!order.currency.value || product.currency === order.currency.value" class="quantity">
              <p class="normal-text-bold">Quantity</p>
              <button class="btn-circle" (click)="incrementQuantity(product)"><i class="material-icons">add</i></button>
              <input
                type="number"
                min="0"
                max="{{ product.quantityMax }}"
                value="0"
                [(ngModel)]="product.quantity"
                (ngModelChange)="checkProductInput(product)"
              />
              <button class="btn-circle" (click)="decrementQuantity(product)">
                <i class="material-icons">remove</i>
              </button>
            </div>
            <div *ngIf="order.currency.value && product.currency != order.currency.value" class="quantity">
              <strong style="font-size :11px;">Choose products with the same currency</strong>
            </div>
          </div>
        </div>
      </div>

      <!--Processed Products-->
      <div class="margin-bottom margin-top" *ngIf="processedProducts?.length !== 0">
        <button class="btn-icons pull-right" (click)="onNextPage2(processedProducts.length, 4)">
          <i class="material-icons">keyboard_arrow_right</i>
        </button>
        <button class="btn-icons pull-right" (click)="onBackPage2()">
          <i class="material-icons">keyboard_arrow_left</i>
        </button>
        <p class="normal-text-bold">Processed Products</p>
      </div>
      <div class="row clearfix">
        <ng-container *ngFor="let product of (processedProducts | paginate: { itemsPerPage: 4, currentPage: page2 })">
          <div class="col-md-3">
            <div class="card card-processed">
              <div>
                <p class="pull-right margin-none">
                  {{ product.package_price }} {{ product.currency }}/<small>{{ product.type_of_package }}</small>
                </p>
              </div>
              <div class="product-details">
                <div>
                  <figure
                    class="img-circular img-circular-sm"
                    [ngStyle]="{ 'background-image': 'url(' + product_image(product) + ')' }"
                  ></figure>
                </div>
                <p class="heading-2">{{ product.produce }} <br /></p>
              </div>
              <div class="package-details">
                <table>
                  <tr>
                    <td>Packages available</td>
                    <td>{{ product.quantityMax }}</td>
                  </tr>
                  <tr>
                    <td>Type of package</td>
                    <td>{{ product.type_of_package }}</td>
                  </tr>
                  <tr *ngIf="product.item_measurement_amount">
                    <td>Item packing type</td>
                    <td>{{ product.item_package_type }}</td>
                  </tr>
                  <tr *ngIf="product.item_measurement_amount">
                    <td>Items per package</td>
                    <td>{{ product.items_per_package }}</td>
                  </tr>
                  <tr *ngIf="product.item_measurement_amount">
                    <td>Amount</td>
                    <td>
                      {{ product.item_measurement_amount }} {{ product.item_measurement_unit }}/{{
                        product.item_package_type
                      }}
                    </td>
                  </tr>
                </table>
              </div>

              <div *ngIf="!order.currency.value || product.currency === order.currency.value" class="quantity">
                <p class="normal-text-bold">Quantity</p>
                <button class="btn-circle" (click)="incrementQuantity(product)">
                  <i class="material-icons">add</i>
                </button>
                <input type="number" min="0" max="{{ product.quantityMax }}" value="0" [(ngModel)]="product.quantity" />
                <button class="btn-circle" (click)="decrementQuantity(product)">
                  <i class="material-icons">remove</i>
                </button>
              </div>
              <div *ngIf="order.currency.value && product.currency != order.currency.value" class="quantity">
                <strong style="font-size :11px;">Choose products with the same currency</strong>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="add-supplier-box" [hidden]="!noInventory">
      <img src="../../../../assets/img/default/pi-po/noProducts.png" />
      <p>{{ seller.first_name | titlecase }} {{ seller.last_name | titlecase }} has no inventory.</p>
      <button class="bttn-primary next-step">
        Next Step &rarr;
      </button>
    </div>
  </div>
</div>
<div class="panel panel-tab summary-col">
  <div class="panel-body">
    <div class="panel-header">
      <p>Add to Purchase Order</p>
    </div>
    <div class="padding-all-2">
      <app-order-generator-summary
        [productList]="addedProducts"
        [currency]="order.currency.value"
        [form]="form"
      ></app-order-generator-summary>
    </div>
  </div>
</div>
